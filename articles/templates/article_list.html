{% load taggit_templatetags2_tags %}
{% get_tagcloud as tags for 'articles.Article' %}

<ul>
        <ul>
          {% for tag in tags %}
            <li><a href="{% url 'tagged' tag.slug %}">{{tag}}</a>({{tag.num_times}})</li>
          {% empty %}
            <li>No Tags</li>
          {% endfor %}
        </ul>
</ul>
	{% if request.user.is_authenticated %}
		<p>
		<a href="{% url 'user_profile' request.user %}">{{request.user}}</a> 您已經登入囉~


				<a href="{% url 'edit_profile' user.username %}">編輯個人資料</a>

	
	<a href="{% url 'password_change' user.username %}">
    	更改密碼
	</a>
	
				<a href="/accounts/logout/">登出</a>
		</p>

	{% else %}
		<p>您尚未登入喔~<a href="{% url 'django.contrib.auth.views.login' %}?next={{request.path}}">登入</a></p>
		或是<a href="/accounts/register/">註冊</a>成為會員
	{% endif %}
{% if request.user.is_authenticated %}
<a href="{% url 'create' %}">發表文章</a>
{% endif %}

{% for article in articles %}
	<h2><a href="{% url 'detail' pk=article.pk %}">{{ article.title }}</a></h2>
	<p>發文者 <a href="/profile_view/{{ article.author }}">{{ article.author }}</a>｜回應({{ article.comment_set.all|length }})｜{{ article.created }}</p>
	{% for tag in article.tags.all %}
		<a href="{% url 'tagged' tag.slug %}">{{ tag.name }}</a>
    {% endfor %}
{% endfor %}

